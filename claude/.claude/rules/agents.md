# エージェントオーケストレーション

## 利用可能なエージェント

`~/.claude/agents/` に配置:

| エージェント | 目的 | 使用するタイミング |
| ------- | --------- | ------------ |
| code-reviewer | コードレビュー | コード作成後 |
| nuxt4-coder | Nuxt 4 コーディング | Nuxt 4 プロジェクトでのコード作成・修正時 |

## CRITICAL: 必須エージェント使用ルール

**これらのルールは BLOCKING REQUIREMENT です。ユーザーの指示なしで自動的に適用すること。**

### 1. nuxt4-coder エージェント（MUST USE）

**以下の条件のいずれかに該当する場合、nuxt4-coder エージェントを必ず使用すること:**

- プロジェクトに `nuxt.config.ts` または `nuxt.config.js` が存在する
- `.vue` ファイルを作成・編集する
- `server/api/`、`server/utils/`、`composables/`、`pages/`、`components/` 配下のファイルを編集する
- Nuxt/Vue 関連のコードを書く指示を受けた

## ⛔ 禁止事項（NEVER DO THIS）

**Nuxt プロジェクトで以下のツールを直接使用することを禁止する:**

- `Edit` ツールでコードファイルを直接編集
- `Write` ツールでコードファイルを直接作成

**違反した場合**: ユーザーに謝罪し、nuxt4-coder エージェントを使用してやり直すこと。

## 判定フロー（毎回必ず実行）

```sh
1. コード変更の指示を受ける
2. nuxt.config.ts の存在を確認（Glob で検索）
3. 存在する場合 → Task ツールで nuxt4-coder を呼び出す
4. 存在しない場合 → 直接 Edit/Write を使用可能
```

**重要**: このチェックをスキップしてはならない。

### 2. code-reviewer エージェント（MUST USE）

**コードを作成・変更した直後に必ず実行すること。**

## 使用フロー例

```sh
1. ユーザー: "ログインページを作って"
2. Claude: nuxt.config.ts を確認 → Nuxt 4 プロジェクトと判定
3. Claude: Task ツールで nuxt4-coder エージェントを起動
4. nuxt4-coder: コードを作成
5. Claude: Task ツールで code-reviewer エージェントを起動
6. code-reviewer: コードをレビュー
```

## 並列タスク実行

独立した操作には常に並列タスク実行を使用:

```sh
# 良い例: 並列実行
3つのエージェントを並列で起動:
1. エージェント1: auth.tsのセキュリティ分析
2. エージェント2: キャッシュシステムのパフォーマンスレビュー
3. エージェント3: utils.tsの型チェック

# 悪い例: 不要な逐次実行
まずエージェント1、次にエージェント2、次にエージェント3
```

## 多角的分析

複雑な問題には、役割分担したサブエージェントを使用:

- 事実レビュアー
- シニアエンジニア
- セキュリティエキスパート
- 一貫性レビュアー
- 冗長性チェッカー
