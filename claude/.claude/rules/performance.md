# パフォーマンスガイドライン

## データベース

- **1クエリ原則**: 同一テーブルへのアクセスは1回にまとめる
- **N+1回避**: 関連データはJOINで一括取得
- **インデックス**: WHERE/JOIN/ORDER BYのカラムに追加
- **バルク操作**: 大量INSERT/UPDATEはバッチ実行
- **必要カラムのみ**: SELECT * を避ける

## キャッシュ

- 対象: 読み取り頻繁・変更少ないデータ、高コスト計算、外部API
- 無効化: TTLと明示的無効化を使い分け
- 命名: `user:{id}:profile` 形式で統一

## API設計

- **並列実行**: 独立したAPIコールは Promise.all
- **ページネーション**: 大量データは必須
- **必要なデータのみ**: 過剰なネストを避ける

## リソース管理

- **ストリーム**: 大ファイルは全体をメモリに載せない
- **コネクションプール**: 適切に設定
- **タイムアウト**: 外部サービス接続に必須

詳細なテクニックは references/performance-patterns.md を参照（必要に応じて読み込むこと）
